<template name="Trade">
  <!-- {{#if isInRole 'village'}}
      <i class="fas fa-times close-action close-action-village"></i>
  {{else}}
      <i class="fas fa-times close-action close-action-manager"></i>
  {{/if}} -->

  <div class="marketContainer">
    <div class="market-leftPart">      
      <div class="">
        {{> MarketNav btn="5"}}
      </div>
    </div>
    <div class="market-rightPart">


      <div class="action market trade">
<!--        <div class="action-header header-market">
          <a class="link" href="/market">Market</a>
          <span class="">/</span>
          <span class="{{#if $.Session.get 'newTransaction'}}close-new-t{{/if}}">Trade</span>
          {{#if $.Session.get 'newTransaction'}}
          <span class="">/</span>
          <span class="">New Transfer</span>
          {{/if}}

        </div>
-->
        <div class="action-body body-trade {{#if $.Session.get 'newTransaction'}}transaction-window{{else}}list-box{{/if}}">
         <!-- {{#if $.Session.get 'newTransaction'}}-->
         <div class="container">
            <div class="row trade">
              <div class="col-3 trade-form">
                {{> FormTransaction}}
              </div>
              <div class="col-8 offset-1 trade-historic">
                {{#if Template.subscriptionsReady}}
                  <table class="table table-striped table-hover">
                    <colgroup>
                      <col span="1" style="width:20px">
                    </colgroup>
                    <thead>
                      <tr>
                        <th colspan="2" style="border-right : 2px solid #e6e6da">
                          What
                        </th>
                        <th colspan="3">
                          When
                        </th>
                      </tr>
                    </thead>
                    <tbody style="overflow-y: scroll">
                      {{#each transactionDocs}}
                          {{> TransactionDoc}}
                      {{/each}}
                    </tbody>
                  </table>
                {{else}}
                 <p>Loading</p>
                {{/if}}
              </div>
            </div>
         </div>
            
         <!-- {{else}}-->
                
          <!--{{/if}}-->
        </div>
<!--
        {{#if $.Session.get 'newTransaction'}}
        {{else}}
            <button class="new-transaction-btn btn-add"><p>+</p></button>
        {{/if}}
-->
      </div>
    </div>
  </div>

   <!-- The Housing Modal -->
<div class="modal" id="housingModal">
  <div class="modal-dialog modal-dialog-centered ">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h2 class="modal-title">Subsistence costs</h2>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <h3>You already paid for this season.</h3>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>

    </div>
  </div>
</div>

<!-- The Crop Seeds Modal -->
<div class="modal" id="cropModal">
  <div class="modal-dialog modal-dialog-centered ">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h2 class="modal-title">Crop Seeds</h2>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <h3>
          {{#if subsistenceActive}}
            You must pay the subsistence costs of your villagers before being able to buy your crops.
          {{else}}
            You can only do that at the start of a season.
          {{/if}}
        </h3>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>

    </div>
  </div>
</div>

<!-- The maintenance Modal -->
<div class="modal" id="maintenanceModal">
  <div class="modal-dialog modal-dialog-centered ">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h2 class="modal-title">Maintenance Counters</h2>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <h3>
          {{#if subsistenceActive}}
            You must pay the subsistence costs of your villagers before being able to maintain your fields.
          {{else}}
            Maintenance is possible only during the start of the season, from season n°2.
          {{/if}}
        </h3>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>

    </div>
  </div>
</div>

<!-- The tank Modal -->
<div class="modal" id="tankModal">
  <div class="modal-dialog modal-dialog-centered ">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h2 class="modal-title">Tank</h2>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">
        <h3>Storing water is only available from season n°2.</h3>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
      </div>

    </div>
  </div>
</div>


  
</template>
